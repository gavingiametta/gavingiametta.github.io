<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, maximum-scale=1.0" />

    <title>Example Student's HCDE 439 Physical Computing Page!</title>

    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <div class="header">
      <h1>Assignment 4</h1>
    </div>

    <div class="header">
      <h2>Schematic</h2>
    </div>

    <div>
      <body>For this project I created a servo motor that moves based off the change in capacitance whenever an object
        is touching a compacitive sensor. This uses two libraries, the servo library and the capacitive sensor library.
        I have created a schematic below that shows off the project. The capacitive sensor is connected to pins 4(send) and 2(recieve).
        There is also a 1M ohm resistor used to control the distance that the capacicitive sensor can detect an object.
        The servo motor is connected to pin 9 which is used to control the angle of the motor.
      </body>
    </div>

    <div class="header">
      <h2>Circuit</h2>
    </div>

    <div>
      <body>Here is the actual circuit itself. The capacitive sensor is plugged into a breadboard to make it easier to understand.
        The servo motor is plugged straight into the breadboard out of convinience.
      </body>
    </div>

    <div class="header">
      <h2>Circuit</h2>
    </div>

    <div>
      <body>Here is the code that was used to get the system to work properly. When the sensor is touched it determines the
        capacitance and then moves the servo motor. The servo motor will move to a certain angle based off the capacitance.
    <div>
      <code>
        #include <CapacitiveSensor.h><br>
        #include <Servo.h><br>
        <br>
        // Sets up servo object<br>
        Servo myServo;<br>
        // Sets up capacitive sensor object<br>
        CapacitiveSensor cs_4_2 = CapacitiveSensor(4,2);<br>
        <br>
        // Minimum value of sensor<br>
        int sensorMin = 0;<br>
        // Maximum value of sensor<br>
        int sensorMax = 1023;<br>
        // Initializes sensorValue<br>
        int sensorValue = 0;<br>
        <br>
        void setup() {<br>
          // Sets data transfer rate<br>
          Serial.begin(9600);<br>
        <br>
          // Sets up servo output<br>
          myServo.attach(9);<br>
        <br>
          // Gives us a start up time to calibrate<br>
          // External Source: https://docs.arduino.cc/built-in-examples/analog/Calibration/<br>
          while (millis() < 5000) {<br>
            // Reads output from capacitive sensor<br>
            long sensorValue =  cs_4_2.capacitiveSensor(30);<br>
        <br>
            // Used to calibrate max value of sensor<br>
            if (sensorValue > sensorMax) {<br>
              sensorMax = sensorValue;<br>
            }<br>
        <br>
            // Used to calibrate min value of sensor<br>
            if (sensorValue < sensorMin) {<br>
              sensorMin = sensorValue;<br>
            }<br>
          }<br> 
        }<br>
        <br>
        void loop()<br>               	 
        {<br>
        <br>  
          // Reads output from capacitive sensor<br>
          long sensorValue =  cs_4_2.capacitiveSensor(30);<br>
        <br>
          // Calibrates previously read max and min values to a range of 0-180<br>
          sensorValue = map(sensorValue, sensorMin, sensorMax, 0, 180);<br>
        <br>
          // Gives input value to servo<br>
          myServo.write(sensorValue);<br>
          // Delay to give servo a chance to move<br>
          delay(15);<br>
        <br>
          // Prints whatever is being input into servo<br>
          Serial.println(sensorValue);<br>
          // delay to limit data to serial port<br>
          delay(100);<br>                    	
        }<br> 
      </code>
    </div>

  </body>
</html>
