<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, maximum-scale=1.0" />

    <title>Example Student's HCDE 439 Physical Computing Page!</title>

    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <div class="header">
      <h1>Assignment 4</h1>
    </div>

    <div class="header">
      <h2>Schematic</h2>
    </div>

    <div>
      <body>For this project I created a servo motor that moves based off the change in capacitance whenever an object
        is touching a compacitive sensor. This uses two libraries, the servo library and the capacitive sensor library.
        I have created a schematic below that shows off the project. The capacitive sensor is connected to pins 4(send) and 2(recieve).
        There is also a 1M ohm resistor used to control the distance that the capacicitive sensor can detect an object.
        The servo motor is connected to pin 9 which is used to control the angle of the motor.
      </body>
    </div>

    <div class="header">
      <h2>Circuit</h2>
    </div>

    <div>
      <body>Here is the actual circuit itself. The capacitive sensor is plugged into a breadboard to make it easier to understand.
        The servo motor is plugged straight into the breadboard out of convinience.
      </body>
    </div>

    <div class="header">
      <h2>Code</h2>
    </div>

    <div>
      <body>Here is the code that was used to get the system to work properly. When the sensor is touched it determines the
        capacitance and then moves the servo motor. The servo motor will move to a certain angle based off the capacitance.
      </body>
    </div>

    <div>
      <code>
        <pre>
          <br>
          #include &lt;CapacitiveSensor.h&gt;
          #include &lt;Servo.h&gt;
          
          // Sets up servo object
          Servo myServo;
          // Sets up capacitive sensor object
          CapacitiveSensor cs_4_2 = CapacitiveSensor(4,2); 
          
          // Minimum value of sensor
          int sensorMin = 0;
          // Maximum value of sensor
          int sensorMax = 1023;
          // Initializes sensorValue
          int sensorValue = 0;
          
          void setup() {
            // Sets data transfer rate
            Serial.begin(9600);
            
            // Sets up servo output
            myServo.attach(9);
          
            // Gives us a start up time to calibrate
            // External Source: https://docs.arduino.cc/built-in-examples/analog/Calibration/
            while (millis() &lt; 5000) {
              // Reads output from capacitive sensor
              long sensorValue =  cs_4_2.capacitiveSensor(30);
              
              // Used to calibrate max value of sensor
              if (sensorValue &gt; sensorMax) {
                sensorMax = sensorValue;
              }
              
              // Used to calibrate min value of sensor
              if (sensorValue &lt; sensorMin) {
                sensorMin = sensorValue;
              }
            }  
          }
          
          void loop()               	 
          {
            
            // Reads output from capacitive sensor
            long sensorValue =  cs_4_2.capacitiveSensor(30);
          
            // Calibrates previously read max and min values to a range of 0-180
            sensorValue = map(sensorValue, sensorMin, sensorMax, 0, 180);
          
            // Gives input value to servo
            myServo.write(sensorValue);
            // Delay to give servo a chance to move
            delay(15);
            
            // Prints whatever is being input into servo
            Serial.println(sensorValue);
            // delay to limit data to serial port
            delay(100);                         	
          }
        </pre> 
      </code>
    </div>

  </body>
</html>
